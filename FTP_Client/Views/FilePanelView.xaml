<UserControl x:Class="FTP_Client.Views.FilePanelView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:converter="clr-namespace:FTP_Client.Converters"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             Foreground="{StaticResource TextBrush}">

    <UserControl.Resources>
        <converter:FolderSizeConverter x:Key="FolderSizeConverter" />
        <converter:DateConverter x:Key="DateConverter" />
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel Margin="10,10,10,0" 
                    Orientation="Horizontal">

            <Button Command="{Binding GoBackCommand}" 
                    Style="{StaticResource IconButton}">
                <Path Data="M4,0 L0,4 L4,8" 
                      Stroke="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                      StrokeThickness="1.5" />
            </Button>

            <Button Command="{Binding GoForwardCommand}" 
                    Style="{StaticResource IconButton}">
                <Path Data="M0,0 L4,4 L0,8" 
                      Stroke="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                      StrokeThickness="1.5" />
            </Button>

            <Button Command="{Binding GoHomeCommand}" 
                    Style="{StaticResource IconButton}">
                <Path Data="M 2 8 L 8 2 L 14 8 M 4 7 L 4 14 L 12 14 L 12 7"
                      Stroke="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                      StrokeThickness="1.2"
                      Width="16" 
                      Height="16" 
                      Stretch="Uniform"/>
            </Button>

            <Border VerticalAlignment="Center"
                    Margin="10,0"
                    Background="{StaticResource PanelBackgroundBrush}"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="4"
                    MinWidth="200"
                    Padding="8,4">

                <TextBlock Text="{Binding CurrentPath}"
                           VerticalAlignment="Center" />
            </Border>

        </StackPanel>

        <DataGrid Grid.Row="1" Margin="10"
                  ItemsSource="{Binding FilesAndFolders}"
                  SelectedItem="{Binding SelectedFileItem}"
                  Style="{StaticResource BaseDataGrid}"
                  AutoGenerateColumns="False"
                  CanUserSortColumns="True"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  SelectionUnit="FullRow">

            <i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseDoubleClick">
                    <i:InvokeCommandAction Command="{Binding ItemDoubleClickCommand}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>

            <DataGrid.Columns>
                <DataGridTextColumn Header="Наименование" 
                                    Binding="{Binding FileName}" 
                                    MinWidth="200" />

                <DataGridTextColumn Header="Дата изменения" 
                                    Binding="{Binding LastModified, Converter={StaticResource DateConverter}}"
                                    Width="Auto" />

                <DataGridTextColumn Header="Тип" 
                                    Binding="{Binding FileType}" 
                                    MinWidth="50" />

                <DataGridTextColumn Header="Размер" 
                                    Binding="{Binding Size, Converter={StaticResource FolderSizeConverter}}" 
                                    MinWidth="50" />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>

</UserControl>